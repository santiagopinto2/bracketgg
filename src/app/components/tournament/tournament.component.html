<div class="no-select" [style.cursor]="isGrabbing ? 'grabbing' : 'grab'">
    <app-search></app-search>

    <div class="container-fluid">
        <div class="row" *ngIf="phases.length > 1" style="margin-bottom: 30px">
            <div class="col-auto" *ngIf="currentPhaseIndex > 0">
                <button mat-icon-button (click)="changePhase(-1)">
                    <mat-icon fontIcon="arrow_back"></mat-icon>
                </button>
            </div>

            <div class="col-auto">
                <p style="font-size: large; font-weight: bold; margin-top: 14px">
                    {{phases[currentPhaseIndex].name}}</p>
            </div>

            <div class="col-auto" *ngIf="currentPhaseIndex < phases.length - 1">
                <button mat-icon-button (click)="changePhase(1)">
                    <mat-icon fontIcon="arrow_forward"></mat-icon>
                </button>
            </div>
        </div>

        <div class="row" *ngFor="let phaseGroup of phaseGroups; let i = index let lastPhaseGroup = last">
            <div class="col-12">
                <p *ngIf="phaseGroups.length > 1" style="font-size: 18px; margin-bottom: 0;">Pool
                    {{getPhaseGroupIdentifier(phaseGroup)}}</p>
            </div>

            <div class="col-12">
                <div class="row" *ngFor="let maxR of maxRounds[i]; let side = index; let losers = last"
                    style="margin-top: 20px;">
                    <div class="col-12">
                        <div class="row flex-nowrap">
                            <div class="col d-flex justify-content-center round"
                                [ngClass]="{ 'losers-bracket': losers }"
                                *ngFor="let _ of [].constructor(maxRounds[i][side]); let j = index">
                                <p style="font-size: 18px; margin-bottom: 0;">{{phaseGroup ? getRoundSets(phaseGroup, (j
                                    + 1) * maxRoundModifier[side])[0].fullRoundText : ''}}</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-12">
                        <div class="row flex-nowrap" style="height: 800px;">
                            <div class="col d-flex flex-column justify-content-around round"
                                *ngFor="let _ of [].constructor(maxRounds[i][side]); let j = index">
                                <div class="row"
                                    *ngFor="let set of getRoundSets(phaseGroup, (j + 1) * maxRoundModifier[side])"
                                    style="border: 1px white solid; border-radius: 4px">

                                    <div class="col p-0">
                                        <div class="row set-row" *ngFor="let slot of set.slots"
                                            [ngClass]="isWinner(set, slot, 'name')">
                                            <div style="padding-left: 4px">
                                                {{slot.entrant ? slot.entrant.name : 'â€Ž'}}
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col p-0" style="max-width: 20px; border-left: 1px white solid;">
                                        <div class="row set-row" *ngFor="let slot of set.slots"
                                            [ngClass]="isWinner(set, slot, 'score')">
                                            <div class="d-flex justify-content-center p-0">
                                                {{getScore(slot, set)}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- <hr *ngIf="winnersIndex != -1 && !losers" style="margin-top: 50px;"> -->

            <hr *ngIf="winnersIndex != -1 && !lastPhaseGroup" style="margin-top: 50px; border-top: solid 10px">
        </div>
    </div>
</div>